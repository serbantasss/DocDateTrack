extends layout

block content
    main.container(role='main')
        .starter-template

            h1.mt-3= title
            p
                | Document ID: #{document._id}
            p
                | Document Owner: #{owner.name}
            p
                | Document Category: #{category.name}

            h2 Owner Details
            p
                | Owner ID: #{owner._id}
            p
                | Owner Name: #{owner.name}
            p
                | Owner Email:&nbsp;
                a(href='/') #{owner.email}
            p
                | Owner Phone: #{owner.phone}

            h2 Category Details
            p
                | Category ID: #{category._id}
            p
                | Category Name: #{category.name}

            // Display instances details
            h2 Instances of Document
            ul.list-group.mb-2
                each instance in instances
                    - let cl = ''
                    - let daysDiff = daysDifference(instance.expire_date_raw)
                    - if (daysDiff > 0)
                    -    cl = 'list-group-item-danger'
                    - if (daysDiff > -30 && daysDiff <= 0)
                    -    cl = 'list-group-item-warning'
                    - if (daysDiff <= -30)
                    -   cl = 'list-group-item-success'

                    .list-group-item(class= cl aria-current='true')
                        .d-flex.w-100.justify-content-between
                            h5.mb-1 Instance ID: #{instance.document_file}
                            small #{time_ago(instance.update_date_raw)}
                        .d-flex
                            if cl === 'list-group-item-danger'
                                small.align-self-end Expired!
                            else if cl === 'list-group-item-warning'
                                small.align-self-end Expires #{time_ago(instance.expire_date_raw)}. Please Update!
                            else
                                small.align-self-end Expires #{time_ago(instance.expire_date_raw)}.
                            a.btn.btn-success.bi.bi-download.ms-auto(href=`/document_instance/download/${instance.document_file}`)
                            a.btn.btn-danger.bi.bi-trash3.ms-1(href=`/delete/document_instance/${instance.document_file}`)
                            a.btn.btn-warning.bi.bi-pencil-square.text-white.ms-1(href=`/edit/document_instance/${instance.document_file}`)



                else
                    p No instances found.


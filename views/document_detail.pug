extends layout

block content
    main.container(role='main')
        .starter-template

            h1.mt-3= title
            p
                | Document ID: #{document._id}
            p
                | Document Owner: #{owner.name}
            p
                | Document Category: #{category.name}

            h2 Owner Details
            p
                | Owner ID: #{owner._id}
            p
                | Owner Name: #{owner.name}
            p
                | Owner Email:&nbsp;
                a(href='/') #{owner.email}
            p
                | Owner Phone: #{owner.phone}

            h2 Category Details
            p
                | Category ID: #{category._id}
            p
                | Category Name: #{category.name}

            // Display instances details
            h2 Instances of Document
            ul.list-group.mb-2
                each instance in instances
                    - let cl = ''
                    - let daysDiff = daysDifference(instance.expire_date_raw)
                    - if (daysDiff > 0)
                    -    cl = 'list-group-item-danger'
                    - if (daysDiff > -30 && daysDiff <= 0)
                    -    cl = 'list-group-item-warning'
                    - if (daysDiff <= -30)
                    -   cl = 'list-group-item-success'
                    a.list-group-item(class= cl href=`/download/${instance.document_file}`, aria-current='true')
                        .d-flex.w-100.justify-content-between
                            h5.mb-1 Instance ID: #{instance.document_file}
                            small #{time_ago(instance.update_date_raw)}
                        if cl === 'list-group-item-danger'
                            small Expired!
                        else if cl === 'list-group-item-warning'
                            small Expires #{time_ago(instance.expire_date_raw)}. Please Update!
                        else
                            small Expires #{time_ago(instance.expire_date_raw)}.


                else
                    p No instances found.

